{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Filtro de mensagens",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filtro de mensagens": {
      "main": [
        [
          {
            "node": "simplificação de dados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "simplificação de dados": {
      "main": [
        [
          {
            "node": "Supabase buscar usuário",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase buscar usuário": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Supabase criar usuário",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase criar usuário": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "informacoes": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "modelo_colares": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "calculadora": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "url_colares": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-17T12:24:37.757Z",
  "id": "ndr3tb7YsnQyP3HT",
  "isArchived": false,
  "meta": null,
  "name": "Potto Flow - Agente de vendas 1",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "9f1f54be-eff8-4301-9ca9-91d8de905d2a",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        80,
        224
      ],
      "id": "228985b7-e47f-4eeb-ad83-accabce21741",
      "name": "Webhook",
      "webhookId": "9f1f54be-eff8-4301-9ca9-91d8de905d2a"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "3eb5bf76-173d-4344-a48e-33509bfbcf2b",
              "leftValue": "={{ $json.body.waitingMessage }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "55f93291-f1b1-48ba-b1b7-e95bcb223115",
              "leftValue": "={{ $json.body.isEdit }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "a97d6f2a-cbb9-4688-8382-269f232881e7",
              "leftValue": "={{ $json.body.isGroup }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "57662324-c41f-42cf-acb8-c36700667887",
              "leftValue": "={{ $json.body.isNewsletter }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "8b51dbca-8110-4aed-9925-27ffdcd3bfa1",
              "leftValue": "={{ $json.body.fromMe }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        304,
        224
      ],
      "id": "9ccd1da6-cc56-4871-a492-85a6ed77b737",
      "name": "Filtro de mensagens"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e70aaff7-15f2-4208-8dd8-138d55c899c1",
              "name": "whatsapp",
              "value": "={{ $('Webhook').item.json.body.phone }}",
              "type": "string"
            },
            {
              "id": "976e115d-5bc0-446c-9d3e-968a3d03767b",
              "name": "nome",
              "value": "={{ $('Webhook').item.json.body.chatName }}",
              "type": "string"
            },
            {
              "id": "f04e8cdc-6048-4d24-821f-5d2beb075186",
              "name": "message",
              "value": "={{ $('Webhook').item.json.body.text.message }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        528,
        224
      ],
      "id": "4ee242cb-7723-4843-b419-fe5cf616bc7c",
      "name": "simplificação de dados"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "Agente vendedor",
        "filters": {
          "conditions": [
            {
              "keyName": "whatsapp",
              "keyValue": "={{ $json.whatsapp }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        752,
        224
      ],
      "id": "32add26d-1947-4af8-afdc-a1b86758cf3e",
      "name": "Supabase buscar usuário",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "2c9859ec-014e-46c0-89d7-961307f7b595",
              "leftValue": "={{ $json.id }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        960,
        224
      ],
      "id": "e637cc10-2a0e-4660-85e8-7662834d7881",
      "name": "If"
    },
    {
      "parameters": {
        "tableId": "Agente vendedor",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "nome",
              "fieldValue": "={{ $('simplificação de dados').item.json.nome }}"
            },
            {
              "fieldId": "whatsapp",
              "fieldValue": "={{ $('simplificação de dados').item.json.whatsapp }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        1152,
        464
      ],
      "id": "2b2c66cb-16ea-41ca-ba43-31597bd8f0b8",
      "name": "Supabase criar usuário"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        1312,
        224
      ],
      "id": "5fb76b54-f483-4339-8ccd-42c75ff7cc3e",
      "name": "Merge"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Webhook').item.json.body.text.message }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "ca7ccddf-60fd-425d-89bc-5f3b3b9394f7"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "texto"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "587e0156-bfed-4464-9745-96728b1ce152",
                    "leftValue": "={{ $('Webhook').item.json.body.audio.audioUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "áudio "
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "17afdd94-ded8-46da-a63a-804b540c1eca",
                    "leftValue": "={{ $('Webhook').item.json.body.image.imageUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Imagem"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        1488,
        224
      ],
      "id": "de7286fe-1821-4ef3-afb6-2159904a3ce6",
      "name": "Switch"
    },
    {
      "parameters": {
        "url": "={{ $('Webhook').item.json.body.audio.audioUrl }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1808,
        240
      ],
      "id": "622471a9-302f-431a-bb30-f0dc8851265d",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2000,
        240
      ],
      "id": "728c36dd-4b00-4ace-b88c-03c7d2479278",
      "name": "OpenAI"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "afe3fd17-523a-454c-8e7c-57048fbad207",
              "name": "mensagem",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2224,
        240
      ],
      "id": "dc43afdd-303b-4df9-8b9d-25fef5502027",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.z-api.io/instances/3DE8B7E0C5AB203F004E4E20A388CB1E/token/D6C681645D55E6E8104FB950/send-text",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "phone",
              "value": "={{ $('simplificação de dados').item.json.whatsapp }}"
            },
            {
              "name": "message",
              "value": "Olá, desculpe não consigo interpretar ou responder a conteúdos enviados em formato de imagem. Poderia descrevê-lo em texto ou áudio para que eu possa ajudar melhor?"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1808,
        400
      ],
      "id": "c118b244-5189-4bc5-9843-a712822db5b7",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "41c5a8f4-c726-4914-83e9-e4e4f536c717",
              "name": "mensagem",
              "value": "={{ $('Webhook').item.json.body.text.message }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1808,
        112
      ],
      "id": "804277f4-cd15-4eb4-a4cb-0cc12654c24a",
      "name": "Edit Fields1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        2400,
        192
      ],
      "id": "faecefe9-9e5d-4770-b009-4a8fb7f85736",
      "name": "Merge1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensagem }}",
        "options": {
          "systemMessage": "=<prompt>\n\n\n  <instruções>\n    Você é a Michele, uma agente especializada em vendas de colares. Sua missão é responder clientes por WhatsApp, oferecendo informações sobre os modelos disponíveis, valores, auxiliando no processo de compra e realizando cálculos de valores à vista ou parcelados quando solicitado. \n    - Seja educada, amigável e objetiva.\n    - Varie a linguagem para evitar parecer robótica, mantendo clareza e eficiência.\n    - Utilize a data de hoje para se localizar: {{ $now.toUTC(-180) }}\n  </instruções>\n\n\n  <tools>\n    <tool>\n      <name>modelo_colares</name>\n      <description>Fornece informações sobre os modelos de colares disponíveis na loja, incluindo imagens e preços.</description>\n      <usage>Acione esta ferramenta sempre que o cliente perguntar sobre modelos disponíveis. Após ativar a tool, envie uma mensagem breve e direta, como \"O que acha desses modelos?\" ou \"Qual desses modelos te agrada mais?\". Não reforce novamente os modelos listados.</usage>\n    </tool>\n<tool>\n      <name>url_colares</name>\n      <description> envia o link de pagamento para compra do produto. Quando tool for ativada você somente deve responder: \"Posso ajudar em mais alguma coisa?\"</description>\n      <usage>Acione esta ferramenta sempre que o cliente perguntar sobre link de pagamento ou como fazer a compra. Após ativar a tool, envie uma mensagem breve e direta, como \"como posso fazer a compra?\" ou \"qual o link de pagamento?\". Não reforce novamente os modelos listados.</usage>\n    </tool>\n    <tool>\n      <name>informacoes</name>\n      <description>Fornece informações básicas da loja, como endereço, quem somos, o que oferecemos, nossos diferenciais e contatos.</description>\n      <usage>Acione esta ferramenta sempre que o cliente solicitar informações sobre a loja ou contato.</usage>\n    </tool>\n    <tool>\n      <name>calculadora</name>\n      <description>Realiza cálculos de valores à vista com desconto e parcelamentos.</description>\n      <usage>\n        - Use esta ferramenta quando o cliente perguntar sobre descontos à vista ou valores das parcelas.\n        - O cálculo para o pagamento à vista considera 5% de desconto.\n        - O cálculo para parcelamento considera o valor cheio dividido pelo número de parcelas solicitado.\n        - Envie mensagens claras, como:\n          - \"À vista com 5% de desconto, o valor fica em R$ X.\"\n          - \"Em 12x, o valor de cada parcela é R$ Y sem juros.\"\n      </usage>\n    </tool>\n  </tools>\n\n\n  <apresentação>\n    - Apresente-se educadamente quando o cliente iniciar a conversa.\n    - Utilize a primeira mensagem do cliente como gancho para sua apresentação.\n    - Inclua uma pergunta para iniciar a interação:\n      - \"{{ new Date().getHours() < 12 ? 'Bom dia' : (new Date().getHours() < 18 ? 'Boa tarde' : 'Boa noite') }} {{ $('simplificação de dados').item.json.nome }}, , tudo bem? Posso te ajudar com informações sobre os modelos e preços de dos nossos colares?\"\n      - \"{{ $('simplificação de dados').item.json.nome }}, qual modelo de colar você está procurando hoje, prata, ouro ou personalizados?\"\n  </apresentação>\n\n\n\n  <condução>\n    - Responda de forma clara e objetiva sobre os preços e modelos disponíveis.\n    - Conduza a conversa incentivando o cliente a compartilhar dúvidas ou preferências.\n    - Inclua informações sobre formas de pagamento ou promoções disponíveis, quando relevante.\n    - Sempre finalize as interações com uma pergunta amigável e direta após o envio das informações solicitadas, evitando repetições.\n\n   \n    <uso_de_tools>\n      - Somente quando o cliente perguntar quais são modelos disponíveis, acione a tool \"modelo_colares\" para enviar as informações completas. Após a ativação da tool, envie uma mensagem breve:\n        - \"O que acha desses modelos?\"\n        - \"Qual desses modelos te agrada mais?\"\n      - Não reforce os modelos listados na mensagem adicional para evitar redundância.\n      - Quando o cliente solicitar informações sobre a loja, acione a tool \"infomacoes\".\n      - Quando o cliente perguntar sobre valores à vista ou parcelados, acione a tool \"calculadora\" e forneça os cálculos necessários.\n      - Quando o cliene quiser fazer o compra acione a tool \"url_colares\"\n      - Quando a tool \"url_colares\" for ativada não envie mais nenhum link de pagamento na proxima mensagem\n    </uso_de_tools>\n\n    <processo_de_venda>\n      - Quando o cliente estiver pronto para comprar, oriente-o sobre os próximos passos:\n        - \"Ótimo! Para finalizar, preciso confirmar o nome do modelo. Qual você prefere?\"\n        - \"Temos o pagamento em até 12x no cartão ou com desconto à vista. Qual você prefere?\"\n      - Confirme o pedido antes de finalizar:\n        - \"Perfeito, só para confirmar: você escolheu o colar ponto de luz, certo? Vou finalizar o pedido para você.\"\n    </processo_de_venda>\n  </condução>\n\n  <respostas_a_dúvidas>\n    - Responda de forma educada e direta. Exemplo:\n      - Cliente: \"Qual é o preço do colar riviera?\"\n      - Resposta: \"O colar riviera está a partir de R$ 300. Podemos falar sobre as opções de pagamento?\"\n  </respostas_a_dúvidas>\n \n  <manejo_de_objeções>\n    - Princípios Gerais:\n      - Ouça a objeção com atenção, demonstre empatia e ofereça soluções.\n      - Use frases como:\n        - \"Entendo sua preocupação, e temos uma opção que pode te ajudar...\"\n        - \"Sei que o preço é importante, e por isso oferecemos desconto para pagamento à vista.\"\n  </manejo_de_objeções>\n\n \n  <limitações>\n    - Não forneça informações fora do escopo de vendas de colares.\n    - Redirecione dúvidas técnicas para o suporte: \"Essa questão é técnica, mas posso te ajudar com o contato do suporte. Quer que eu encaminhe?\"\n  </limitações>\n\n\n  <uso_de_linguagem_e_formatação>\n    - Evite parecer robótica; use variações na linguagem.\n    - Negrito para informações importantes:\n      - \"O colar riviera está disponível por *R$ 300*.\"\n  </uso_de_linguagem_e_formatação>\n\n<regra>\n\nQuando tool <name>url_colares</name> for ativada você somente deve responder: \"Posso ajudar em mais alguma coisa?\"\n\n</prompt>"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        2928,
        192
      ],
      "id": "c5af9689-af92-491c-a2b3-f2821bb03049",
      "name": "AI Agent",
      "notes": "Desenvolvido por Potto Flow"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2800,
        464
      ],
      "id": "0412b4d5-26d4-4102-993b-356dffd0e66d",
      "name": "OpenAI Chat Model"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('simplificação de dados').item.json.whatsapp }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        2960,
        464
      ],
      "id": "241fd099-7738-439c-92e0-5e15d3e36ed6",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.z-api.io/instances/3DE8B7E0C5AB203F004E4E20A388CB1E/token/D6C681645D55E6E8104FB950/send-text",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "phone",
              "value": "={{ $('simplificação de dados').item.json.whatsapp }}"
            },
            {
              "name": "message",
              "value": "={{ $json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3440,
        192
      ],
      "id": "3e708832-f319-4854-b9ed-e99bb2b8e32c",
      "name": "HTTP Request2"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Use quando o usuário precisar saber de dados da loja de colares",
        "operation": "get",
        "documentURL": "1I7c692c3ctxMUHYjUzEumr2_rx6QIGMYMFLz8JLmC6I"
      },
      "type": "n8n-nodes-base.googleDocsTool",
      "typeVersion": 2,
      "position": [
        3104,
        464
      ],
      "id": "ac162a3f-e542-4b05-9e11-29e5479adab0",
      "name": "informacoes"
    },
    {
      "parameters": {
        "description": "Ative essa tool apenas para apresentar os modelos e preços dos colares disponíveis",
        "workflowId": {
          "__rl": true,
          "value": "HjPky6DgeWswZzKQ",
          "mode": "list",
          "cachedResultName": "Potto Flow - Agente de vendas 2 imagem"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "nome": "={{ $('simplificação de dados').item.json.nome }}",
            "whatsapp": "={{ $('simplificação de dados').item.json.whatsapp }}",
            "message": "={{ $('Merge1').item.json.mensagem }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "nome",
              "displayName": "nome",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "whatsapp",
              "displayName": "whatsapp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        3248,
        464
      ],
      "id": "f7e88c00-2099-4ac3-a92c-a6dc5b3dc72f",
      "name": "modelo_colares"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "typeVersion": 1,
      "position": [
        3392,
        464
      ],
      "id": "25905a66-ab96-407c-ac03-00701e729e1a",
      "name": "calculadora"
    },
    {
      "parameters": {
        "description": "use essa tool apenas para enviar link de pagamento ",
        "workflowId": {
          "__rl": true,
          "value": "fd1bfbLeAoT1rkWK",
          "mode": "list",
          "cachedResultName": "Potto Flow - Agente de vendas 3 url site"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "whatsapp": "={{ $('simplificação de dados').item.json.whatsapp }}",
            "nome": "={{ $('simplificação de dados').item.json.nome }}",
            "message": "={{ $('Merge1').item.json.mensagem }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "nome",
              "displayName": "nome",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "whatsapp",
              "displayName": "whatsapp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        3520,
        464
      ],
      "id": "85200d9e-3953-446e-81c6-7604dfe11693",
      "name": "url_colares"
    },
    {
      "parameters": {
        "content": "## Simplificação de dados com busca e cadastro do usuário\n",
        "height": 640,
        "width": 1440,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1,
      "id": "5f19044d-1976-48d9-bb02-737c41d8e3e7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Tipos de mensagens texto, áudio e imagem\n",
        "height": 640,
        "width": 1076,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1472,
        0
      ],
      "typeVersion": 1,
      "id": "2e19a40f-2f7c-41e0-a6a4-4658b867616d",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Agente de IA e Tools\n",
        "height": 640,
        "width": 1160,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2592,
        0
      ],
      "typeVersion": 1,
      "id": "3da5aa8b-7658-47f7-b0ba-e0ba7cc601a7",
      "name": "Sticky Note2"
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "primary-production-d2ab1.up.railway.app",
            "user-agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_3_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.4 Mobile/15E148 Safari/604.1",
            "content-length": "746",
            "content-type": "application/json",
            "origin": "https://api.z-api.io",
            "server": "Z-API",
            "x-forwarded-for": "132.226.164.186",
            "x-forwarded-host": "primary-production-d2ab1.up.railway.app",
            "x-forwarded-proto": "https",
            "x-railway-edge": "railway/europe-west4-drams3a",
            "x-railway-request-id": "Eh1Tqpw6TzyR4z1Z0-QtfA",
            "x-real-ip": "132.226.164.186",
            "x-request-start": "1748111394430",
            "z-api-token": "D6C681645D55E6E8104FB950",
            "accept-encoding": "gzip"
          },
          "params": {},
          "query": {},
          "body": {
            "isStatusReply": false,
            "chatLid": "266356775760039@lid",
            "connectedPhone": "558393727738",
            "waitingMessage": false,
            "isEdit": false,
            "isGroup": false,
            "isNewsletter": false,
            "instanceId": "3DE8B7E0C5AB203F004E4E20A388CB1E",
            "messageId": "3EB04212176DFDECBBD197",
            "phone": "5511960726271",
            "fromMe": false,
            "momment": 1748111386774,
            "status": "RECEIVED",
            "chatName": "Potto Aceleradora",
            "senderPhoto": null,
            "senderName": "Potto Aceleradora",
            "photo": "https://pps.whatsapp.net/v/t61.24694-24/427828063_1213427703012659_4070374442379976404_n.jpg?ccb=11-4&oh=01_Q5Aa1gEphZ8XmBUHbkiIjM6YuEeXpCVV9dNmq3uCplGaylwCdw&oe=683F2D34&_nc_sid=5e03e0&_nc_cat=106",
            "broadcast": false,
            "participantLid": null,
            "forwarded": false,
            "type": "ReceivedCallback",
            "fromApi": false,
            "text": {
              "message": "ola"
            }
          },
          "webhookUrl": "https://primary-production-d2ab1.up.railway.app/webhook-test/9f1f54be-eff8-4301-9ca9-91d8de905d2a",
          "executionMode": "test"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-12-17T12:24:37.757Z",
      "createdAt": "2025-12-17T12:24:37.757Z",
      "role": "workflow:owner",
      "workflowId": "ndr3tb7YsnQyP3HT",
      "projectId": "o60HadikmqrvYZ9Z"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "updatedAt": "2025-12-11T21:49:57.103Z",
      "createdAt": "2025-12-11T21:49:57.103Z",
      "id": "jVJBpv1Zg5iwH5ja",
      "name": "Potto Flow - Aula"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-12-17T12:24:46.384Z",
  "versionId": "541e9cd4-3326-43e8-bdd8-554818d42259"
}
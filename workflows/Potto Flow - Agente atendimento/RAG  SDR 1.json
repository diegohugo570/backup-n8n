{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "Google Drive Trigger": {
      "main": [
        [
          {
            "node": "Campos importantes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Simplificando dados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simplificando dados": {
      "main": [
        [
          {
            "node": "Supabase - Buscar usuário",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Supabase - Criar usuário",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase - Buscar usuário": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase - Criar usuário": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Answer questions with a vector store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store1": {
      "ai_vectorStore": [
        [
          {
            "node": "Answer questions with a vector store",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Answer questions with a vector store",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call n8n Workflow Tool": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Campos importantes": {
      "main": [
        [
          {
            "node": "Google Drive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-17T12:22:42.842Z",
  "id": "t1UJUJgYTadZTfYg",
  "isArchived": false,
  "meta": null,
  "name": "Potto Flow - Agente atendimento/RAG  SDR 1",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {}
          ]
        },
        "triggerOn": "specificFile",
        "fileToWatch": {
          "__rl": true,
          "value": "1WCrU6I-SCfx28KR9RF-9agfbxGaSbEPG",
          "mode": "id"
        }
      },
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        80,
        800
      ],
      "id": "59cad348-dd9a-4b2a-9977-be9e2ca7728c",
      "name": "Google Drive Trigger"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.file_id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        480,
        800
      ],
      "id": "9c173970-23e3-46f3-ac2b-f40fa25c9ac4",
      "name": "Google Drive"
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        672,
        800
      ],
      "id": "c86af136-e349-4a29-9837-f57b48827e71",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1,
      "position": [
        1280,
        800
      ],
      "id": "18217b7e-b019-4ee6-b6ac-7e0c3ec87973",
      "name": "Supabase Vector Store",
      "notes": "Desenvolvido por Potto Flow"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1264,
        1120
      ],
      "id": "f6ecc333-a3a0-46f7-80f5-471511a0de04",
      "name": "Embeddings OpenAI"
    },
    {
      "parameters": {
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "file_id",
                "value": "={{ $('Campos importantes').item.json.file_id }}"
              },
              {
                "name": "file_type",
                "value": "={{ $('Campos importantes').item.json.file_type }}"
              },
              {
                "name": "autor",
                "value": "={{ $('Google Drive Trigger').item.json.lastModifyingUser.displayName }}"
              },
              {
                "name": "data_criacao",
                "value": "={{ $('Google Drive Trigger').item.json.createdTime }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        1472,
        1024
      ],
      "id": "9c1fc417-2b6e-45c1-8588-b39a6572d7b7",
      "name": "Default Data Loader",
      "notes": "Desenvolvido por Potto Flow"
    },
    {
      "parameters": {
        "chunkSize": 12000,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1552,
        1200
      ],
      "id": "b1b530b8-80c6-477f-84eb-9b2508eeaf49",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "15976f69-931e-4cc6-af6a-ea709384cf9e",
              "name": "data",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        880,
        800
      ],
      "id": "37a36d15-ff38-4945-92bd-59e8510cf585",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "2ea0c821-080b-49c4-9f32-6ca55b52e2bc",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        208
      ],
      "id": "e0dfeee3-db1b-49dc-adbe-b19dd29469d6",
      "name": "Webhook",
      "webhookId": "2ea0c821-080b-49c4-9f32-6ca55b52e2bc"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "5296b18a-ddcd-4232-8a7f-4e67b54b72cc",
              "leftValue": "={{ $json.body.waitingMessage }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "5139db31-ceac-4882-a649-04aa986ae770",
              "leftValue": "={{ $json.body.isEdit }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "3ea32c89-c2ed-45da-ad9e-3b93c068d44a",
              "leftValue": "={{ $json.body.isGroup }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "ac6a0160-7871-455b-8c0e-65a5d43ee7d2",
              "leftValue": "={{ $json.body.isNewsletter }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        224,
        208
      ],
      "id": "d64786a7-0d05-45e0-97db-b51169f0e5c1",
      "name": "Filter"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "01459d61-67fd-4af5-b5c5-6786cf97dd7c",
              "name": "Nome",
              "value": "={{ $('Webhook').item.json.body.chatName }}",
              "type": "string"
            },
            {
              "id": "4a8489e7-e8ab-4693-b003-39b4adc58e05",
              "name": "telefone",
              "value": "={{ $('Webhook').item.json.body.phone }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        448,
        208
      ],
      "id": "0acdf3f0-9fb4-423d-84bd-f364b502fc6a",
      "name": "Simplificando dados"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "39283272-05ff-47f6-bf55-22bb5cac82aa",
              "leftValue": "={{ $json.id }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        880,
        208
      ],
      "id": "643b227f-9a2b-411b-b094-ad72da961855",
      "name": "If"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        1184,
        160
      ],
      "id": "9a9998dd-12cb-4c9b-8640-56319211f429",
      "name": "Merge"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "Agente - SDR",
        "filters": {
          "conditions": [
            {
              "keyName": "Telefone",
              "keyValue": "={{ $json.telefone }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        672,
        208
      ],
      "id": "62d0c84b-ff7c-42a2-93e2-cadd97a3dda5",
      "name": "Supabase - Buscar usuário",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "tableId": "Agente - SDR",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "Nome",
              "fieldValue": "={{ $('Simplificando dados').item.json.Nome }}"
            },
            {
              "fieldId": "Telefone",
              "fieldValue": "={{ $('Simplificando dados').item.json.telefone }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        1040,
        352
      ],
      "id": "27da96ab-cc8d-42d1-9bd7-f0904da3499b",
      "name": "Supabase - Criar usuário"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Filter').item.json.body.text.message }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "605c186a-589a-4812-82f5-ede344366c3e"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "texto"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b706bb87-da3e-4662-a55f-3cea7fa5258c",
                    "leftValue": "={{ $('Filter').item.json.body.audio.audioUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "áudio"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "84658630-0d31-4a46-9c27-1f760f4a0f40",
                    "leftValue": "={{ $('Webhook').item.json.body.image.imageUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "imagem"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        1424,
        192
      ],
      "id": "fbcb2a4c-974d-4f27-a234-16bab3e47709",
      "name": "Switch"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1984,
        272
      ],
      "id": "f5848699-a66b-42ca-911c-7e817449b5cc",
      "name": "OpenAI"
    },
    {
      "parameters": {
        "url": "={{ $('Webhook').item.json.body.audio.audioUrl }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1792,
        240
      ],
      "id": "8d3cc2cb-2df1-4129-9131-7c3d97a20a62",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1d0a824d-3f3a-49fe-a023-77a952590773",
              "name": "mensagem",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2160,
        272
      ],
      "id": "a237b368-691f-474f-8d80-9c678b555310",
      "name": "Edit Fields"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        2320,
        208
      ],
      "id": "6b9ea49c-0184-4be0-9efd-cbf57bf09cd5",
      "name": "Merge1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "03cd98e1-d491-47e9-b21c-248741005357",
              "name": "mensagem",
              "value": "={{ $('Webhook').item.json.body.text.message }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1792,
        64
      ],
      "id": "36fbbf7b-18bb-45fd-a771-46800290e266",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.z-api.io/instances/3DE8B7E0C5AB203F004E4E20A388CB1E/token/D6C681645D55E6E8104FB950/send-text",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "phone",
              "value": "={{ $('Simplificando dados').item.json.telefone }}"
            },
            {
              "name": "message",
              "value": "Olá, desculpe não consigo interpretar ou responder a conteúdos enviados em formato de imagem. Poderia descrevê-lo em texto ou áudio para que eu possa ajudar melhor?"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1792,
        432
      ],
      "id": "4be24046-96ff-41a5-9a73-6c7c44aa9fb0",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensagem }}",
        "options": {
          "systemMessage": "=<INSTRUÇÕES GERAIS>\n\nQuem é você:\nVocê é Michele, uma SDR altamente eficiente e profissional, especializada no atendimento e agendamentos. Você atua como intermediária entre os leads e os demais agentes, cuidando do agendamento e informações de agente de atendimento para whatsapp\n\nSeu objetivo:\nSeu papel é fornecer informações solicitadas de forma clara, amigável e objetiva, além de utilizar as ferramentas adequadas para:\n\nConsultar e informar disponibilidade de horários\n\nAgendar, reagendar ou cancelar reuniões no Google Calendar\n\nInformar detalhes sobre o agente que vendemos\n\n\nSuas diretrizes:\n\nSempre responda de forma educada, cordial e objetiva.\n\nVarie suas expressões para soar natural e não robótica, mas sem perder clareza.\n\nUse a data atual como referência: {{ $now.toUTC(-180) }}.\n\nNunca forneça informações que não foram solicitadas ou que você não tem certeza.\n\nNão invente dados. Prefira dizer \"Não tenho essa informação, mas posso verificar para você.\"\n\nNão utilize emojis.\n\nUtilize a ferramenta apropriada para a necessidade apresentada.\n\n\n<TOOLS DISPONÍVEIS>\nTool 1  – Agendamento:\nUse esta ferramenta para:\n\nAgendar reuniões, quando o lead solicitar um horário.\n\nReagendar reuniões, caso o lead precise trocar.\n\nCancelar reuniões, caso o lead deseje desmarcar.\n\nTool 2 – <Answer questions with a vector store>\nInformações do agente de atendimento de whatsapp :\nUse esta ferramenta para responder perguntas sobre:\n\nBenefícios\nFuncionalidades Principais\nTecnologia Sugerida\nEtapas do Projeto \ncronograma\nInvestimento\n\n\n<EXEMPLO DE USO DAS TOOLS>\nExemplo 1:\nUsuário: \"Gostaria de marcar uma reunião para quinta-feira.\"\nResposta: Utilize a Tool 1 para buscar horários disponíveis na quinta-feira e apresentar opções.\n\nExemplo 2:\nUsuário: \"Quais são os beneficios do agente?\"\nResposta: Utilize a Tool 2 para listar os tratamentos da clínica.\n\nExemplo 3:\nUsuário: \"Preciso cancelar minha reunião de amanhã.\"\nResposta: Utilize a Tool 1 para localizar e cancelar o evento solicitado.\n\n</EXEMPLO DE USO DAS TOOLS>\n\n</TOOLS DISPONÍVEIS>\n\n\n<COMPORTAMENTO EM CASOS NÃO PREVISTOS>\n\nSe o lead fizer uma solicitação que não se encaixa claramente em nenhuma ferramenta, siga estes passos:\n\nResponda de forma educada que irá verificar.\n\nNunca tente adivinhar ou inventar informações.\n\n</COMPORTAMENTO EM CASOS NÃO PREVISTOS>\n\nImportante:\nSempre processe cada solicitação com atenção ao contexto, utilize as ferramentas corretas e seja eficiente e objetiva na comunicação.\n\n</INSTRUÇÕES GERAIS>"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        2720,
        80
      ],
      "id": "8448edd2-f351-41a0-b37d-02356094c733",
      "name": "AI Agent",
      "notes": "Desenvolvido por Potto Flow"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2624,
        368
      ],
      "id": "c31e87b7-029e-4790-baf8-f7febd5bc447",
      "name": "OpenAI Chat Model"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Simplificando dados').item.json.telefone }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        2784,
        368
      ],
      "id": "1fef8e1e-1ac4-4863-941e-bf9bc39735d8",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "description": "Use essa tool para ver informações sobre o agente de atendimento de whatsapp"
      },
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1.1,
      "position": [
        3008,
        368
      ],
      "id": "4560c163-40af-4894-a35a-207ab10ab574",
      "name": "Answer questions with a vector store"
    },
    {
      "parameters": {
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.1,
      "position": [
        2880,
        592
      ],
      "id": "8a6a10cb-2c12-4a95-855b-e0f1196b8212",
      "name": "Supabase Vector Store1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2800,
        752
      ],
      "id": "adafb656-5611-4716-9ec8-259cff74d1fd",
      "name": "Embeddings OpenAI1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        3248,
        608
      ],
      "id": "8b53f027-ad37-4745-807b-f4ceb1b7d64e",
      "name": "OpenAI Chat Model1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.z-api.io/instances/3DE8B7E0C5AB203F004E4E20A388CB1E/token/D6C681645D55E6E8104FB950/send-text",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "phone",
              "value": "={{ $('Simplificando dados').item.json.telefone }}"
            },
            {
              "name": "message",
              "value": "={{ $json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3232,
        80
      ],
      "id": "0674da42-fcd3-44ed-ab47-1e66ce302f76",
      "name": "HTTP Request2"
    },
    {
      "parameters": {
        "description": "=Utilize essa tool quando o usuário precisar fazer algum agendamento, reagendamento ou cancelamento de reunião no google calendar\n\nAo enviar as informações para o outro workflow enviar a informação de {{ $('Simplificando dados').item.json.telefone }}",
        "workflowId": {
          "__rl": true,
          "value": "qyLVd50F80GhLPJM",
          "mode": "list",
          "cachedResultName": "Potto Flow - Agente SDR 2 agendamento"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('message', `mensagem que foi gerada pelo agente`, 'string') }}",
            "nome": "={{ $('Simplificando dados').item.json.Nome }}",
            "telefone": "={{ $('Simplificando dados').item.json.telefone }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "nome",
              "displayName": "nome",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "telefone",
              "displayName": "telefone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        3360,
        368
      ],
      "id": "c18a29b8-811c-4149-add3-671bb533c30d",
      "name": "Call n8n Workflow Tool"
    },
    {
      "parameters": {
        "content": "## Recebendo dados e cadastrando no Supabase\n                                        \n",
        "height": 600,
        "width": 1388
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -48,
        0
      ],
      "typeVersion": 1,
      "id": "396d30cc-47ad-4ffa-ba4a-7385ab6757ff",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## tratando as mensagens ",
        "height": 600,
        "width": 1076,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1392,
        0
      ],
      "typeVersion": 1,
      "id": "541b47ee-ea64-4872-ae46-a40c79fef9c0",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Banco de dados vetorial",
        "height": 660,
        "width": 1780,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        704
      ],
      "typeVersion": 1,
      "id": "562614c7-a711-4822-8c51-e8e3725aec08",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8a7a7fff-900b-4f03-8a84-6e36402bf9f4",
              "name": "file_id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "6090d479-95e5-41cf-8c1a-c46ac342592e",
              "name": "file_type",
              "value": "={{ $json.mimeType }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        272,
        800
      ],
      "id": "c18035cf-d08a-44ee-be5d-bc1b74107a36",
      "name": "Campos importantes"
    },
    {
      "parameters": {
        "content": "## Agente e Tool\n",
        "height": 940,
        "width": 1100,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2512,
        0
      ],
      "typeVersion": 1,
      "id": "9ee63d34-e93a-4363-8062-b09301d679d4",
      "name": "Sticky Note4"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-12-17T12:22:42.842Z",
      "createdAt": "2025-12-17T12:22:42.842Z",
      "role": "workflow:owner",
      "workflowId": "t1UJUJgYTadZTfYg",
      "projectId": "o60HadikmqrvYZ9Z"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "updatedAt": "2025-12-11T21:49:57.103Z",
      "createdAt": "2025-12-11T21:49:57.103Z",
      "id": "jVJBpv1Zg5iwH5ja",
      "name": "Potto Flow - Aula"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-12-17T12:22:58.647Z",
  "versionId": "e295d5d1-1fba-4ad5-9da6-9adf87d7dff1"
}
{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "filtro inicial": {
      "main": [
        [
          {
            "node": "simplificação de dados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "simplificação de dados": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "HTTP Request Z-API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "filtro inicial",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-10T20:59:50.112Z",
  "id": "lAPFkmatNMPbguKi",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Potto Flow - Meu primeiro Agente",
  "nodes": [
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ff5db912-8da8-4f07-8221-9eacab5293d5",
              "leftValue": "={{ $json.body.waitingMessage }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "2e57b950-07dd-472b-8d07-904fbc7a3888",
              "leftValue": "={{ $json.body.isEdit }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "5b837f31-0c5d-4d96-92e1-b2008171a776",
              "leftValue": "={{ $json.body.isGroup }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "c801d830-cd9e-4e64-a589-56986cf0a0e2",
              "leftValue": "={{ $json.body.isNewsletter }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            },
            {
              "id": "c38e44da-9e3f-4d14-84ba-7a8c13e3271e",
              "leftValue": "={{ $json.body.fromMe }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -224,
        256
      ],
      "id": "d04854f7-9fc7-4a21-95e8-3adcd866a7b3",
      "name": "filtro inicial"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "67f98f78-2024-4318-90ad-cfb10292864c",
              "name": "whatsapp",
              "value": "={{ $json.body.phone }}",
              "type": "string"
            },
            {
              "id": "d7fd0d27-31c5-4173-b186-38ec93008ecb",
              "name": "nome",
              "value": "={{ $json.body.chatName }}",
              "type": "string"
            },
            {
              "id": "dc5becef-d1dd-4ad8-ba0d-3753fd91e3e6",
              "name": "mensagem",
              "value": "={{ $json.body.text.message }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -16,
        256
      ],
      "id": "87e6f965-10c6-4ef3-a05d-f4fd5a1b1b4c",
      "name": "simplificação de dados"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.mensagem }}",
        "options": {
          "systemMessage": "Você é uma secretaria do Potto Flow que atende as pessoas com muita simpatia "
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        224,
        256
      ],
      "id": "aa340707-783f-4fcf-b791-cb5a667a3f15",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        176,
        480
      ],
      "id": "8e846f73-e85f-481f-94e5-1806c790e760",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "58nXg6cOh7QVFFh8",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.whatsapp }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        320,
        480
      ],
      "id": "08d1866a-ac4c-46f5-91ce-e4db7b9bb1ef",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.z-api.io/instances/3EB903BBA42D414C3A3D3E7113B9D751/token/581B17834DFE3182F701B211/send-text",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "phone",
              "value": "={{ $('simplificação de dados').item.json.whatsapp }}"
            },
            {
              "name": "message",
              "value": "={{ $json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        576,
        256
      ],
      "id": "786f4b94-f9ce-4d48-b9af-ec89b42a4092",
      "name": "HTTP Request Z-API",
      "credentials": {
        "httpHeaderAuth": {
          "id": "ks8wd3wgPtRtGBlJ",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "meu-primeiro-agente",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -464,
        256
      ],
      "id": "21414420-3aef-45e6-8e45-28dd1357a2f0",
      "name": "Webhook",
      "webhookId": "2d5bade2-2bef-4d54-b540-cfd11e5d655e"
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "n8n.hiperautomacoes.shop",
            "user-agent": "Mozilla/5.0 (X11; Linux x86_64; rv:111.0) Gecko/20100101 Firefox/111.0",
            "content-length": "1091",
            "accept-encoding": "gzip",
            "content-type": "application/json; charset=utf-8",
            "origin": "https://api.z-api.io",
            "server": "Z-API",
            "x-forwarded-for": "137.131.255.144",
            "x-forwarded-host": "n8n.hiperautomacoes.shop",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "9a4cd7c5312d",
            "x-real-ip": "137.131.255.144",
            "z-api-token": "581B17834DFE3182F701B211"
          },
          "params": {},
          "query": {},
          "body": {
            "isStatusReply": false,
            "chatLid": null,
            "connectedPhone": "5511984412962",
            "waitingMessage": false,
            "isEdit": false,
            "isGroup": true,
            "isNewsletter": false,
            "instanceId": "3EB903BBA42D414C3A3D3E7113B9D751",
            "messageId": "3EB0680138430CA29293F1",
            "phone": "120363420969465974-group",
            "fromMe": false,
            "momment": 1765490400001,
            "status": "RECEIVED",
            "chatName": "Geral - Alunos",
            "senderPhoto": "https://pps.whatsapp.net/v/t61.24694-24/175842168_144554824692498_2830369608148418403_n.jpg?ccb=11-4&oh=01_Q5Aa3QEJMIqjL5vtTQWxr8o0RZzb21PKXa9is1N9XJapn5zi-A&oe=6948470D&_nc_sid=5e03e0&_nc_cat=108",
            "senderName": "Bruno",
            "photo": "https://pps.whatsapp.net/v/t61.24694-24/538364682_1772199776720683_3653317085192474370_n.jpg?ccb=11-4&oh=01_Q5Aa3QFHKui_oxQAbDRkIc7aJrhYD67LbMgopyK_QMbhKgbz6w&oe=69483BC4&_nc_sid=5e03e0&_nc_cat=109",
            "broadcast": false,
            "participantPhone": "555193181007",
            "participantLid": null,
            "forwarded": false,
            "type": "ReceivedCallback",
            "fromApi": false,
            "text": {
              "message": "140 reais mês para 100 numeros, se não me engano"
            },
            "_traceContext": {
              "traceId": "31446a5c97222a15ca27f4d8bf6837c4",
              "spanId": "b3edde74acba8f4d"
            }
          },
          "webhookUrl": "https://webhookn8n.hiperautomacoes.shop/webhook-test/meu-primeiro-agente",
          "executionMode": "test"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-12-10T20:59:50.112Z",
      "createdAt": "2025-12-10T20:59:50.112Z",
      "role": "workflow:owner",
      "workflowId": "lAPFkmatNMPbguKi",
      "projectId": "o60HadikmqrvYZ9Z"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "updatedAt": "2025-12-11T21:49:57.103Z",
      "createdAt": "2025-12-11T21:49:57.103Z",
      "id": "jVJBpv1Zg5iwH5ja",
      "name": "Potto Flow - Aula"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-12-11T22:00:29.937Z",
  "versionId": "4cd41f9b-d865-4e76-854b-e07f075d1851"
}
{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "Atualizar_Status_Lead": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Atualizar_email_Lead": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "CRM_Atualizar_Lead_perdido": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "CRM_buscar_Leads": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "CRM_Atualizar_Lead_qualificado": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2026-01-02T18:17:22.782Z",
  "id": "92yWBoRbXGpwqeAn",
  "isArchived": false,
  "meta": null,
  "name": "Agende SDR MCP - CRM",
  "nodes": [
    {
      "parameters": {
        "path": "notion-crm"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "d87ff554-9844-40c3-9909-854c0d1e69a6",
      "name": "MCP Server Trigger",
      "webhookId": "dde7b098-024b-42a6-8ce1-b81b02a671bc"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=Sempre que houver alguma atualização no notion é necessário executar essa tool para atualizar os dados do lead no supabase.\n\nDepois que executar CRM_Atualizar_Lead_qualificado ou CRM_Atualizar_Lead_perdido, execute essa tool para atualizar status do lead no supabase.",
        "operation": "update",
        "tableId": "Agente CRM",
        "filters": {
          "conditions": [
            {
              "keyName": "whatsapp",
              "condition": "eq",
              "keyValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conditions0_Field_Value', `IdConversa do Lead que está falando, que é o proprio telefone `, 'string') }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues0_Field_Value', `Atualizar Status do Lead se necessário. Pode ser \"Atendimento Humano\" ou \"perdido\"`, 'string') }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        464,
        304
      ],
      "id": "31657415-2660-41e1-a5dc-42fdb1c8cb97",
      "name": "Atualizar_Status_Lead",
      "notes": "Desenvolvido por Potto Flow"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=Usar essa tool para atualizar o e-mail da pessoa dentro do Supabase",
        "operation": "update",
        "tableId": "Agente CRM",
        "filters": {
          "conditions": [
            {
              "keyName": "whatsapp",
              "condition": "eq",
              "keyValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conditions0_Field_Value', `whatsapp do usuário em atendimento`, 'string') }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "email",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues0_Field_Value', `e-mail do usuário em atendimento`, 'string') }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        640,
        304
      ],
      "id": "4ed380db-b478-45c8-885e-f309a139d02e",
      "name": "Atualizar_email_Lead"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=Utilize essa tool para atualizar dados de um lead que está em atendimento por você e será finalizado. O Atendimento é finalizado quando percebemos que o lead não tem mais interesse no serviço.\n\n#Fluxo passo a passo\n- Ative a tool CRM_buscar_Leads para obter dados de todos os leads;\n- Pelo nome ou telefone do lead que você está atendendo, salve o id dela do crm do notion;\n- Execute essa tool, o id do Database Page é id do lead em atendimento;\n- Atualize o campo \"status\" do lead no crm notion para Perdido;\n- Atualize o campo \"Resumo Mensagens\" do lead no crm com um resumo breve sobre tudo que conversou com este lead durante o primeiro processo de atendimento.\n- Ative a tool Atualizar_email_Lead para atualizar o e-mail do usuario no supabase\n- Execute a tool Atualiza_status_lead para atualizar o status do lead no supabase para \"Perdido\". SEMPRE execute esse ultimo passo. ",
        "resource": "databasePage",
        "operation": "update",
        "pageId": {
          "__rl": true,
          "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Database_Page', `id do lead em atendimento`, 'string') }}",
          "mode": "id"
        },
        "simple": false,
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Status|select",
              "selectValue": "Perdido"
            },
            {
              "key": "Resumo Mensagens|rich_text",
              "textContent": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('propertyValues1_Text', `Resumo da conversa em atendimento`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notionTool",
      "typeVersion": 2.2,
      "position": [
        272,
        304
      ],
      "id": "1a2cd15c-47d5-4431-b4e0-196f05b29f4e",
      "name": "CRM_Atualizar_Lead_perdido"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Utilize essa Tool para puxar todos os leads do CRM, assim você terá todos os dados dos leads.",
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "260738f0-264a-8044-a441-daf26b06e99c",
          "mode": "list",
          "cachedResultName": "CRM ",
          "cachedResultUrl": "https://www.notion.so/260738f0264a8044a441daf26b06e99c"
        },
        "simple": false,
        "options": {}
      },
      "type": "n8n-nodes-base.notionTool",
      "typeVersion": 2.2,
      "position": [
        -176,
        304
      ],
      "id": "c578b4f2-ca18-4d12-9e30-167a1b667ef7",
      "name": "CRM_buscar_Leads",
      "notes": "Desenvolvido por Potto Flow"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "=Utilize essa tool para atualizar dados de um lead que está em atendimento por você e irá repassar para um atendimento humano.\n\n#Fluxo passo a passo:\n- Ative a tool CRM_buscar_Leads para obter dados de todos os leads;\n- Pelo nome ou telefone do lead que você está atendendo, salve o id dela do crm do notion;\n- Execute essa tool, o id do Database Page é id do lead em atendimento;\n- Atualize o campo \"e-mail\" com o e-mail dessa pessoa em atendimento;\n- Atualize o campo \"status\" do lead no crm notion para Atendimento Humano;\n- Atualize o campo \"Resumo Mensagens\" do lead no crm com um resumo breve sobre tudo que conversou com este lead durante o primeiro processo de atendimento. Esse resumo será muito útil para o Atendente Humano pois será o ponto de partida dele para finalizar a venda.\n- Execute a tool Atualizar_status_lead para atualizar o status do lead no supabase para \"Atendimento Humano\". SEMPRE execute esse ultimo passo. ",
        "resource": "databasePage",
        "operation": "update",
        "pageId": {
          "__rl": true,
          "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Database_Page', `id do lead em atendimento`, 'string') }}",
          "mode": "id"
        },
        "simple": false,
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Status|select",
              "selectValue": "Atendimento Humano"
            },
            {
              "key": "Resumo Mensagens|rich_text",
              "textContent": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('propertyValues1_Text', `Resumo da conversa do atendimento`, 'string') }}"
            },
            {
              "key": "e-mail|email",
              "emailValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('propertyValues2_Email', `e-mail do usuário solicitado na conversa`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notionTool",
      "typeVersion": 2.2,
      "position": [
        32,
        304
      ],
      "id": "19c1fda8-d275-4eef-81d4-560da2dcfcd7",
      "name": "CRM_Atualizar_Lead_qualificado"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "shared": [
    {
      "updatedAt": "2026-01-02T18:17:22.782Z",
      "createdAt": "2026-01-02T18:17:22.782Z",
      "role": "workflow:owner",
      "workflowId": "92yWBoRbXGpwqeAn",
      "projectId": "o60HadikmqrvYZ9Z"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "updatedAt": "2025-12-11T21:49:57.103Z",
      "createdAt": "2025-12-11T21:49:57.103Z",
      "id": "jVJBpv1Zg5iwH5ja",
      "name": "Potto Flow - Aula"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2026-01-02T18:17:22.782Z",
  "versionId": "fb92f388-9e2e-4477-b0d8-7631153c2b8f"
}